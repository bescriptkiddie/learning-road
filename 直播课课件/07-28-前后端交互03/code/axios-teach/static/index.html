<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="./axios.min.js"></script>
  </head>

  <body>
    <button onclick="onGet()">get</button>
    <button onclick="onPost()">post</button>
    <script>
      // 拦截器
      // 请求拦截
      axios.interceptors.request.use((config) => {
        // console.log(config);
        console.log("request1111");
        return config;
      });

      axios.interceptors.request.use((config) => {
        console.log(config);
        console.log("request2222");
        return config;
      });

      // 响应拦截
      axios.interceptors.response.use((res) => {
        // console.log(res);
        console.log("response1111");
        return res;
      });

      axios.interceptors.response.use((res) => {
        // console.log(res);
        console.log("response2222");
        return res;
      });

      async function onGet() {
        // 函数调用
        // const res = await axios({
        //   url: "/getData",
        //   params: {
        //     name: "xiaoh",
        //     age: 12,
        //   },
        // });

        // console.log(res.data);

        // 对象方式调用
        const res = await axios.get("/getData");
        console.log(res.data);
      }

      async function onPost() {
        // 函数调用
        const data = {
          name: "xiaoh",
          age: 14,
        };
        // const res = await axios({
        //   url: "/postData",
        //   method: "post",
        //   data,
        // });

        // console.log(res.data);

        // 对象方式调用
        const res = await axios.post("/postData", data);
        console.log(res.data);
      }
    </script>
  </body>
</html>
